"use strict";(function(n){var t=n.wf||{},t=function(){var t={token:"_core_",values:["logger"]},n={};return{name:"wf",version:"1.0.0",define:function(i,r,u){if(typeof r=="string"&&r===t.token&&(r=t.values),!n[i]){var f={name:i,dependencies:r,factory:u};n[i]=f}return n[i]},require:function(t){var i=n[t],u,r;if(!i.entity){for(u=[],r=0;r<i.dependencies.length;r++)n[i.dependencies[r]].entity?u.push(n[i.dependencies[r]].entity):u.push(this.require(i.dependencies[r]));i.entity=i.factory.apply(function(){},u)}return i.entity},inherit:function(n,t){function r(){if(n&&(this.baseprototype=n.prototype),!this.init)throw new Error("init function is undefind");this.init.apply(this,arguments)}var f=function(n){var t=n.toString().match(/^[\s\(]*function[^(]*\(([^\)]*)\)/)[1].replace(/\s+/g,"").split(",");return t.length==1&&!t[0]?[]:t},u,i;typeof n=="object"&&(t=n,n=null);n&&(u=function(){},u.prototype=n.prototype,r.prototype=new u,r.prototype.constructor=r);for(i in t)t.hasOwnProperty(i)&&(r.prototype[i]=n&&typeof t[i]=="function"&&f(t[i])[0]==="_base_"?function(t,i){return function(){var r=this,u=function(){return n.prototype[t].apply(r,arguments)};return i.apply(this,Array.prototype.concat.apply(u,arguments))}}(i,t[i]):t[i]);return r}}};n.wf=t()})(window),function(){String.prototype.format=function(){var n=this;return arguments.length>0&&$.each(arguments,function(t,i){n=n.replace(new RegExp("\\{"+t+"\\}","g"),i)}),n};String.prototype.empty=function(){return""};Array.prototype.empty=function(){return[]}}(),function(n){for(var t=n.console||{},u=["assert","clear","count","debug","dir","dirxml","exception","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],f={version:"1.0.0"},i,r=0,e=u.length;r<e;r++)i=u[r],f[i]=function(n){return function(){if(typeof t[n]=="undefined")return 0;Function.prototype.apply.call(t[n],t,arguments)}}(i);n.console=f}(window);wf.define("logger",[],function(){var n={debug:"debug",info:"info",warn:"warn",error:"error"},i={local:"local",remote:"remote"},r=i.local,u="",t=function(n,t){if(r=i.local)console[t](n);else if(!u)throw new Error("remoteUrl empty,");return n};return{getOutputMode:function(){return r},setOutputMode:function(n){n&&(u=n,r=i.remote)},debug:function(i){return t(i,n.debug)},info:function(i){return t(i,n.info)},warn:function(i){return t(i,n.warn)},error:function(i){return t(i,n.error)}}});wf.define("cookie",[],function(){return{set:function(n,t,i,r,u){document.cookie=[n,"=",t,u?"; expires="+u.toGMTString():"",r?"; path="+r:"",i?"; domain="+i:""].join("")},get:function(n){var t,i=new RegExp("(^| )"+n+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?t[2]:null},remove:function(n){document.cookie=n+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT;"}}});wf.define("loader",[],function(){var n={},t=function(n){var t=document.createElement("script");return t.type="text/javascript",t.async="true",t.src=n+".js",t};return{name:"model loader",load:function(i,r){for(var f,u=0;u<i.length;u++)if(f=i[u],!n[f]){var o=document.getElementsByTagName("head")[0],e=t(f),s=function(){for(var u=!0,t=0;t<i.length;t++)if(!n[i[t]]){u=!1;break}u&&r()};e.onload=function(){n[f]=!0;o.removeChild(e);s(i,r)};o.appendChild(e)}}}});wf.define("Action","_core_",function(){return wf.inherit({name:String.empty,register:function(n){this.funcs.push(n)},piping:function(){var n=this;$.each(n.funcs,function(){this(n)})},init:function(n,t,i){this.name=n;this.funcs=[];this.$target=i;$.isFunction(t)&&t.call(this)}})});wf.define("UI",["logger"],function(){var n="wf",t="-",i=".";return wf.inherit({name:String.empty,active:!0,$element:{},action:{},show:function(){this.$element.show()},hide:function(){this.$element.hide()},remove:function(){this.$element.remove()},clsName:function(i){return[n,this.role,i].join(t)},find:function(n){return this.$element.find(i+this.clsName(n))},initElement:function(n){var t=this;$.each(n,function(){this.$element=t.find(this.selector);this.action&&$.isFunction(this.action)&&this.action(t);t[this.selector]=this})},initEvent:function(n){for(var t in n)this.on(t,n[t])},init:function(n,t){this.name=n;this.$element=t}})});wf.define("UI.Checkbox",["UI","logger","Action"],function(n,t,i){var r="checkbox",u=wf.inherit(n,{role:r,checkedCls:function(){return this.clsName("checked")},on:function(n,i){this.action[n]?this.action[n].register(i):t.error("checkbox 无{0}事件".format(n))},set:function(n){var i=this.input.$element,t=n===undefined?i.is(":checked")?!1:!0:n;i.prop("checked",t);this.checked=t;this.$element[t?"addClass":"removeClass"](this.checkedCls())},init:function(n,t,r,u,f){var e=this;n(t,r);e.initElement([{selector:"inner"},{selector:"input"},{selector:"text"}]);e.set(u||!1);e.action={click:new i("click",function(){var n=this;n.$target.click(function(){e.set();n.piping()})},this.$element)};e.initEvent(f)}});return u.auto=function(n){var t,i;$.each($('[data-role="'+r+'"]'),function(f){t=$(this);i=t.attr("id")||r+f;n.setElement(i,new u(i,t,t.hasClass("wf-checkbox-checked")))})},u});wf.define("page",["logger"],function(n){return{name:String.empty,components:{},element:{},setElement:function(t,i){if(this.element[t]){n.error("页面组件id"+t+"重复");return}this.element[t]=i},auto:function(){for(var t in this.components)$.isFunction(this.components[t].auto)?this.components[t].auto(this):n.error(t+"缺少auto render")},logger:n,render:function(n,t,i,r){var u=this,f=".";return u.name=n,$.each(t,function(){this.indexOf(f)>-1?u.components[this.split(f)[1]]=wf.require(this):u[this]||(u[this]=wf.require(this))}),$.isFunction(i)&&i.call(u,u.components),(r===undefined||r)&&u.auto(),u}}});