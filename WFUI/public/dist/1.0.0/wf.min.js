"use strict";(function(n){var t=n.wf||{};t=function(){var t={token:"_core_",values:["logger"]},n={};return{name:"wf",version:"1.0.0",define:function(i,r,u){if(typeof r=="string"&&r===t.token&&(r=t.values),!n[i]){var f={name:i,dependencies:r,factory:u};n[i]=f}return n[i]},require:function(t){var r,i=n[t],u;if(!i.entity){for(u=[],r=0;r<i.dependencies.length;r++)n[i.dependencies[r]].entity?u.push(n[i.dependencies[r]].entity):u.push(this.require(i.dependencies[r]));i.entity=i.factory.apply(function(){},u)}return i.entity},inherit:function(n,t){function r(){if(n&&(this.baseprototype=n.prototype),!this.init)throw new Error("init function is undefind");this.init.apply(this,arguments)}var f=function(n){var t=n.toString().match(/^[\s\(]*function[^(]*\(([^\)]*)\)/)[1].replace(/\s+/g,"").split(",");return t.length==1&&!t[0]?[]:t},u,i;typeof n=="object"&&(t=n,n=null);n&&(u=function(){},u.prototype=n.prototype,r.prototype=new u,r.prototype.constructor=r);for(i in t)t.hasOwnProperty(i)&&(r.prototype[i]=n&&typeof t[i]=="function"&&f(t[i])[0]==="_base_"?function(t,i){return function(){var r=this,u=function(){return n.prototype[t].apply(r,arguments)};return i.apply(this,Array.prototype.concat.apply(u,arguments))}}(i,t[i]):t[i]);return r}}};n.wf=t()})(window),function(){String.prototype.format=function(){var n=this;return arguments.length>0&&$.each(arguments,function(t,i){n=n.replace(new RegExp("\\{"+t+"\\}","g"),i)}),n};String.prototype.empty=function(){return""};Array.prototype.empty=function(){return[]}}(),function(n){for(var t=n.console||{},u=["assert","clear","count","debug","dir","dirxml","exception","error","group","groupCollapsed","groupEnd","info","log","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],f={version:"1.0.0"},i,r=0,e=u.length;r<e;r++)i=u[r],f[i]=function(n){return function(){if(typeof t[n]=="undefined")return 0;Function.prototype.apply.call(t[n],t,arguments)}}(i);n.console=f}(window);wf.define("logger",[],function(){var n={debug:"debug",info:"info",warn:"warn",error:"error"},i={local:"local",remote:"remote"},r=i.local,u="",t=function(n,t){if(r===i.local)console[t](n);else if(!u)throw new Error("remoteUrl empty,");return n};return{getOutputMode:function(){return r},setOutputMode:function(n){n&&(u=n,r=i.remote)},debug:function(i){return t(i,n.debug)},info:function(i){return t(i,n.info)},warn:function(i){return t(i,n.warn)},error:function(i){return t(i,n.error)}}});wf.define("cookie",[],function(){return{set:function(n,t,i,r,u){document.cookie=[n,"=",t,u?"; expires="+u.toGMTString():"",r?"; path="+r:"",i?"; domain="+i:""].join("")},get:function(n){var t,i=new RegExp("(^| )"+n+"=([^;]*)(;|$)");return(t=document.cookie.match(i))?t[2]:null},remove:function(n){document.cookie=n+"=; expires=Mon, 26 Jul 1997 05:00:00 GMT;"}}});wf.define("loader",[],function(){var n={},t=function(n){var t=document.createElement("script");return t.type="text/javascript",t.async="true",t.src=n+".js",t};return{name:"model loader",load:function(i,r){for(var f,o,e,s,u=0;u<i.length;u++)f=i[u],n[f]||(o=document.getElementsByTagName("head")[0],e=t(f),e.path=f,s=function(){for(var u=!0,t=0;t<i.length;t++)if(!n[i[t]]){u=!1;break}u&&r()},e.onload=function(){n[this.path]=!0;o.removeChild(this);s(i,r)},o.appendChild(e))}}});wf.define("browser","_core_",function(){var i=/(webkit)\/([\w.]+)/,r=/(opera)(?:.*version)?[ \/]([\w.]+)/,u=/(msie) ([\w.]+)/,f=/(mozilla)(?:.*? rv:([\w.]+))?/,n={},e=window.navigator.userAgent,o=function(n){n=n.toLowerCase();var t=i.exec(n)||r.exec(n)||u.exec(n)||n.indexOf("compatible")<0&&f.exec(n)||[];return{browser:t[1]||"",version:t[2]||"0"}},t=o(e);return t.browser&&(n[t.browser]=!0,n.version=t.version),n});wf.define("Action",[],function(){return wf.inherit({name:String.empty,register:function(n){this.funcs.push(n)},piping:function(n){var t=this;$.each(t.funcs,function(){this(t,n)})},init:function(n,t,i){this.name=n;this.funcs=[];this.$target=i;$.isFunction(t)&&t.call(this)}})});wf.define("UI",["logger"],function(){var i="wf",n="-",r=".",t=wf.inherit({name:String.empty,active:!0,$element:{},action:{},show:function(){this.$element.show()},hide:function(){this.$element.hide()},remove:function(){this.$element.remove()},clsName:function(t){return[i,this.role,t].join(n)},find:function(n){return this.$element.find(r+this.clsName(n))},blankClick:function(){var n=[];return $(document).mouseup(function(t){$.each(n,function(){this.target.is(t.target)||this.target.has(t.target).length!==0?$.isFunction(this.clickIn)&&this.clickIn():$.isFunction(this.clickOut)&&this.clickOut()})}),function(t,i,r){n.push({target:t,clickIn:r,clickOut:i})}}(),supportCss3:function(n){var r=["webkit","Moz","ms","o"],t,i=[],f=document.documentElement.style,u=function(n){return n.replace(/-(\w)/g,function(n,t){return t.toUpperCase()})};for(t in r)i.push(u(r[t]+"-"+n));i.push(u(n));for(t in i)if(i[t]in f)return!0;return!1},animationCls:function(t){return i+n+t.join(n)},animation:function(n,t,i){n.addClass(t);n.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){n.removeClass(t);$.isFunction(i)&&i()})},initElement:function(n){var t=this;$.each(n,function(){this.$element=t.find(this.selector);this.action&&$.isFunction(this.action)&&this.action(this.$element);t[this.selector]=this})},initEvent:function(n){if(n)for(var t in n)this.on(t,n[t])},init:function(n,t){this.name=t||n.attr("id");this.$element=n}});return t.clsName=function(t,r){return[i,r,t].join(n)},t.CLS_PREFIX=r,t.ID_PREFIX="#",t.CHAIN=n,t});wf.define("UI.Checkbox",["UI","logger","Action"],function(n,t,i){var r="checkbox",u=wf.inherit(n,{role:r,checkedCls:function(){return this.clsName("checked")},disabledCls:function(){return this.clsName("disabled")},on:function(n,i){this.action[n]?this.action[n].register(i):t.error("checkbox 无{0}事件".format(n))},set:function(n){var i=this.input.$element,t=n===undefined?i.is(":checked")?!1:!0:n;i.prop("checked",t);this.checked=t;this.$element[t?"addClass":"removeClass"](this.checkedCls())},setText:function(n){this.text.$element.text(n)},init:function(n,t,r,u,f){var e=this;n(r,t);e.initElement([{selector:"inner"},{selector:"input"},{selector:"text"}]);e.set(u||!1);e.action={click:new i("click",function(){var n=this;n.$target.click(function(){if(e.$element.hasClass(e.disabledCls()))return!1;e.set();n.piping()})},this.$element)};e.initEvent(f)}}),f='[data-role="'+r+'"]',e=function(n,t){return n.attr("id")||r+t},o=function(t,i,f){return new u(e(t,i),t,t.hasClass(n.clsName("checked",r)),f?{click:f}:null)};return u.group=function(t){var i={items:{}},h,s=t.data("target");return $.each($(n.ID_PREFIX+s).find(f),function(n){h=$(this);i.items[e(h,s+n)]=o(h,s+n,function(){var n=[],t=!0;for(var r in i.items){if(n.length==0){n.push(i.items[r].checked);continue}if($.inArray(i.items[r].checked,n)<0){t=!1;break}}i.controller.set(t?n[0]:!1)})}),i.controller=new u(s+"controller",t,t.hasClass(n.clsName("checked",r)),{click:function(){for(var u in i.items)i.items[u].set(t.hasClass(n.clsName("checked",r)))}}),i.name=s,i},u.auto=function(t){var i,e;$.each($(f).not(n.CLS_PREFIX+n.clsName("group-item",r)),function(n){i=$(this);e=i.data("target");t.addElement(e?u.group(i,e):o(i,n))})},u});wf.define("UI.Radio",["UI","logger","Action"],function(n,t,i){var r="radio",u=wf.inherit(n,{role:r,checkedCls:function(){return this.clsName("checked")},disabledCls:function(){return this.clsName("disabled")},on:function(n,i){this.action[n]?this.action[n].register(i):t.error("radio 无{0}事件".format(n))},set:function(n){var i=this.input.$element,t=n===undefined?i.is(":checked")?!1:!0:n;i.prop("checked",t);this.checked=t;this.$element[t?"addClass":"removeClass"](this.checkedCls())},setText:function(n){this.text.$element.text(n)},init:function(n,t,r,u,f){var e=this;n(r,t);e.initElement([{selector:"inner"},{selector:"input"},{selector:"text"}]);e.set(u||!1);e.action={click:new i("click",function(){var n=this;n.$target.click(function(){if(e.$element.hasClass(e.disabledCls()))return!1;e.set(!0);n.piping()})},this.$element)};e.initEvent(f)}}),e='[data-role="'+r+'"]',f=function(n,t){return n.attr("id")||r+t},o=function(t,i,e){return new u(f(t,i),t,t.hasClass(n.clsName("checked",r)),e?{click:e}:null)};return u.group=function(n,t){var i={items:{}},r,u=f(n,t);return $.each(n.find(e),function(n){r=$(this);i.items[f(r,u+n)]=o(r,u+n,function(n){for(var t in i.items)t!==n.$target.attr("id")&&i.items[t].set(!1)})}),i.name=u,i},u.auto=function(t){$.each($(e).not("."+n.clsName("group-item",r)),function(n){t.addElement(o($(this),n))});$.each($("."+n.clsName("group",r)),function(){t.addElement(u.group($(this)))})},u});wf.define("UI.Select",["logger","UI","Action","browser"],function(n,t,i,r){var u="select",f=wf.inherit(t,{role:u,openCls:function(){return this.clsName("open")},disabledCls:function(){return this.clsName("disabled")},selectCls:function(){return this.clsName("option-selected")},on:function(t,i){this.action[t]?this.action[t].register(i):n.error("select 无{0}事件".format(t))},open:function(){this.$element.addClass(this.openCls());this.animation(this.options.$element,this.animationCls(["slide","up","in"]))},close:function(){var n=this;n.supportCss3("animation")&&!r.msie?n.animation(this.options.$element,this.animationCls(["slide","up","out"]),function(){n.$element.removeClass(n.openCls())}):n.$element.removeClass(n.openCls())},set:function(n,i){this.selection.$element.find(t.CLS_PREFIX+this.clsName("selection-value")).text(i);this.input.$element.val(n)},value:function(){return this.input.$element.val()},init:function(n,r,f,e){var o=this;n(f,r);o.initElement([{selector:"selection"},{selector:"input"},{selector:"options",action:function(n){var r,f,i=o.selectCls(),e=n.find(t.CLS_PREFIX+o.clsName("option",u)),s=function(n){o.set(n.data("value"),n.text())};e.each(function(){f=$(this);f.click(function(){$(this).hasClass(i)||(o.action.change.piping($(this)),$(this).addClass(i).siblings().removeClass(i),s($(this)),o.close())});f.hasClass(i)&&(r=f)});r||(r=$(e[0]).addClass(i));s(r)}}]);o.action={click:new i("click",function(){var n=this;n.$target.click(function(){if(o.$element.hasClass(o.disabledCls()))return!1;o[o.$element.hasClass(o.openCls())?"close":"open"]();n.piping()})},this.selection.$element),change:new i("change",function(){},this.options.$element)};o.initEvent(e);o.blankClick(o.find([t.CLS_PREFIX+o.clsName("options",u),t.CLS_PREFIX+o.clsName("selection",u)].join(",")),function(){o.$element.hasClass(o.openCls())&&o.close()})}}),e='[data-role="'+u+'"]';return f.auto=function(n){$.each($(e),function(t){n.addElement(new f($(this).attr("id")||u+t,$(this)))})},f});wf.define("UI.Tab",["UI","logger","Action"],function(n,t,i){var r="tab",u=wf.inherit(n,{role:r,disabledCls:function(){return this.clsName("disabled")},activeCls:function(t){return this.clsName(t+n.CHAIN+"active")},activeTo:function(t){var i=this;$.each(["nav","content"],function(){i[this].$element.find(n.CLS_PREFIX+i.clsName(this+n.CHAIN+"item")).eq(t).addClass(i.activeCls(this)).siblings().removeClass(i.activeCls(this))});i.content.$element.css({"margin-left":-(t*100)+"%"})},on:function(n,i){this.action[n]?this.action[n].register(i):t.error("tab 无{0}事件".format(n))},init:function(t,r,u,f){t(u,r);var e=this;this.initElement([{selector:"nav"},{selector:"content"}]);e.action={change:new i("change",function(){var n=this;n.$target.click(function(){if($(this).hasClass(e.disabledCls())||$(this).hasClass(e.activeCls("nav")))return!1;e.activeTo($(this).index());n.piping()})},this.nav.$element.find(n.CLS_PREFIX+this.clsName("nav-item")))};this.initEvent(f)}}),f='[data-role="'+r+'"]';return u.auto=function(n){$.each($(f),function(t){n.addElement(new u($(this).attr("id")||r+t,$(this)))})},u});wf.define("UI.Alert",["UI","logger","Action"],function(n,t,i){var u="alert",r=wf.inherit(n,{role:u,on:function(n,i){this.action[n]?this.action[n].register(i):t.error("alert 无{0}事件".format(n))},close:function(){this.$element.remove()},init:function(n,t,r,u){var f=this;n(r,t);f.initElement([{selector:"icon-close"}]);f.action={click:new i("click",function(){var n=this;n.$target.click(function(){f.close();n.piping()})},this["icon-close"].$element)};f.initEvent(u)}}),f='[data-role="'+u+'"]';return r.auto=function(n){$.each($(f),function(t){n.addElement(new r("alert"+t,$(this)))})},r});wf.define("page",["logger"],function(n){return{name:String.empty,components:{},element:{},addElement:function(t){if(this.element[t.name]){n.error("页面组件id:"+t.name+" 重复");return}this.element[t.name]=t},auto:function(){for(var t in this.components)$.isFunction(this.components[t].auto)?this.components[t].auto(this):n.error(t+"缺少auto render")},logger:n,render:function(n,t,i,r){var u=this,f=".";return u.name=n,$.each(t,function(){this.indexOf(f)>-1?u.components[this.split(f)[1]]=wf.require(this):u[this]||(u[this]=wf.require(this))}),$.isFunction(i)&&i.call(u,u.components),(r===undefined||r)&&u.auto(),u}}});